<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Welcome to qxdn Blog</title>
    <url>/2020/10/17/helloworld/</url>
    <content><![CDATA[<blockquote>
<p>è¿™æ˜¯ä¸€åˆ‡çš„å¼€å§‹</p>
</blockquote>
<span id="more"></span>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¿ç ”åæ— æ‰€äº‹äº‹ï¼ŒåŒæ—¶æƒ³èµ·æ¥è‡ªå·±çš„GitHub Pageä¸€ç›´æ²¡æœ‰ç”¨è¿‡ï¼Œå› æ­¤å€Ÿç”¨äº†<a href="https://github.com/Huxpro">Huxpro</a>çš„<a href="https://github.com/Huxpro/huxpro.github.io">Hux Blog</a>æ¥æ­å»ºè‡ªå·±çš„GitHub page</p>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>Hello World</p>
<p>è¿™é‡Œæ˜¯<a href="https://github.com/qxdn">qxdn</a>çš„Blogï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ç¯‡Blog</p>
]]></content>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µèµ›</title>
    <url>/2020/10/19/electronicDesignContest/</url>
    <content><![CDATA[<blockquote>
<p>ç®€å•å›å¿†ç”µèµ›</p>
</blockquote>
<h2 id="ç”µèµ›é€‰é¢˜"><a href="#ç”µèµ›é€‰é¢˜" class="headerlink" title="ç”µèµ›é€‰é¢˜"></a>ç”µèµ›é€‰é¢˜</h2><p>æˆ‘ä½œä¸ºç»„é•¿å’Œ<a href="https://github.com/while0l1">æå¿—è±ª</a>ã€<a href="https://github.com/renruiwhut">ä»»ç¿</a>ä¸€èµ·å‚åŠ äº†2019å¹´çš„ç”µèµ›ã€‚è¯´åˆ°ç»„é•¿çš„é€‰æ‹©å…¶å®ä¹Ÿæ˜¯å¾ˆéšæ„ï¼Œå°±æ˜¯æŠ•éª°å­æ¯”å°ï¼Œæœ€å°çš„åšç»„é•¿ã€‚2019å¹´çš„é¢˜ç›®å¯ä»¥è§<a href="https://www.nuedc-training.com.cn/index/news/details/new_id/154.html">è¿™é‡Œ</a>ï¼Œæˆ‘ä»¬å½“æ—¶ä¸»è¦åœ¨Fé¢˜å’ŒHé¢˜é‡Œé¢çº ç»“ï¼Œæˆ‘ä¸»å¼ Fé¢˜ï¼Œè€Œæå¿—è±ªå¼ºçƒˆåå¯¹ï¼Œå› ä¸ºæˆ‘ä»¬ç¼ºå°‘ä¼ æ„Ÿå™¨ï¼Œè€Œä¸”ä¸€æ—¶æ²¡æœ‰è§£å†³æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©äº†Hé¢˜ã€‚</p>
<span id="more"></span>

<h2 id="é¢˜ç›®è¦æ±‚"><a href="#é¢˜ç›®è¦æ±‚" class="headerlink" title="é¢˜ç›®è¦æ±‚"></a>é¢˜ç›®è¦æ±‚</h2><p>é¢˜ç›®çš„å…·ä½“è¦æ±‚å’Œæµ‹è¯•ç»“æœè§<a href="https://www.nuedc-training.com.cn/index/news/details/new_id/153">è¿™</a></p>
<p><img src="/images/electronicDesignContest/problem.png" alt="å‚è€ƒå›¾ç‰‡"></p>
<h3 id="åŸºæœ¬è¦æ±‚"><a href="#åŸºæœ¬è¦æ±‚" class="headerlink" title="åŸºæœ¬è¦æ±‚"></a>åŸºæœ¬è¦æ±‚</h3><ol>
<li>ç”µç£ç‚®èƒ½å¤Ÿå°†å¼¹ä¸¸å°„å‡ºç‚®å£ã€‚</li>
<li>ç¯å½¢é¶æ”¾ç½®åœ¨é¶å¿ƒè·ç¦»å®šæ ‡ç‚¹200~300cmé—´ï¼Œä¸”åœ¨ä¸­å¿ƒè½´çº¿ä¸Šçš„ä½ç½®å¤„ï¼Œé”®ç›˜è¾“å…¥è·ç¦»då€¼ï¼Œç”µç£ç‚®å°†å¼¹ä¸¸å‘å°„è‡³è¯¥ä½ç½®ï¼Œè·ç¦»åå·®çš„ç»å¯¹å€¼ä¸å¤§äº50cmã€‚</li>
<li>ç”¨é”®ç›˜ç»™ç”µç£ç‚®è¾“å…¥ç¯å½¢é¶ä¸­å¿ƒä¸å®šæ ‡ç‚¹çš„è·ç¦»d åŠä¸ä¸­å¿ƒè½´çº¿çš„åç¦»è§’åº¦aï¼Œä¸€é”®å¯åŠ¨åï¼Œç”µç£ç‚®è‡ªåŠ¨ç„å‡†å°„å‡»ï¼ŒæŒ‰å‡»ä¸­ç¯å½¢é¶ç¯æ•°è®¡åˆ†ï¼›è‹¥è„±é¶åˆ™ä¸è®¡åˆ†ã€‚</li>
</ol>
<h3 id="å‘æŒ¥éƒ¨åˆ†"><a href="#å‘æŒ¥éƒ¨åˆ†" class="headerlink" title="å‘æŒ¥éƒ¨åˆ†"></a>å‘æŒ¥éƒ¨åˆ†</h3><ol>
<li>åœ¨æŒ‡å®šèŒƒå›´å†…ä»»æ„ä½ç½®æ”¾ç½®ç¯å½¢é¶ï¼ˆæœ‰å¼•å¯¼æ ‡è¯†ï¼Œå‚è§è¯´æ˜2ï¼‰ï¼Œä¸€é”®å¯åŠ¨åï¼Œç”µç£ç‚®è‡ªåŠ¨æœå¯»ç›®æ ‡å¹¶ç‚®å‡»ç¯å½¢é¶ï¼ŒæŒ‰å‡»ä¸­ç¯å½¢é¶ç¯æ•°è®¡åˆ†ï¼Œå®Œæˆæ—¶é—´â‰¤30sã€‚</li>
<li>ç¯å½¢é¶ä¸å¼•å¯¼æ ‡è¯†ä¸€åŒæ”¾ç½®åœ¨è·ç¦»å®šæ ‡ç‚¹d=250cm çš„å¼§çº¿ä¸Šï¼ˆä»¥é¶å¿ƒå®šä½ï¼‰ï¼Œå¼•å¯¼æ ‡è¯†å¤„äºæœ€è¿œä½ç½®ã€‚ç”µç£ç‚®æ”¾ç½®åœ¨å®šæ ‡ç‚¹ï¼Œç‚®ç®¡æ°´å¹³æ–¹å‘ä¸ä¸­è½´çº¿å¤¹è§’a =-30Â°ã€ä»°è§’0Â°ã€‚ä¸€é”®å¯åŠ¨ç”µç£ç‚®ï¼Œç‚®ç®¡åœ¨æ°´å¹³æ–¹å‘ä¸ä¸­è½´çº¿å¤¹è§’aä»-30Â°è‡³30Â°ã€å†è¿”å›-30Â°åšå¾€å¤è½¬åŠ¨ï¼Œåœ¨è½¬åŠ¨è¿‡ç¨‹ä¸­ï¼ˆä¸­é€”ä¸å¾—åœé¡¿ï¼‰ç”µç£ç‚®è‡ªåŠ¨æœå¯»ç›®æ ‡å¹¶ç‚®å‡»ç¯å½¢é¶ï¼ŒæŒ‰å‡»ä¸­ç¯å½¢é¶ç¯æ•°è®¡åˆ†ï¼Œå¯åŠ¨è‡³å‡»å‘å®Œæˆæ—¶é—´â‰¤10sã€‚</li>
<li>å…¶ä»–ã€‚</li>
</ol>
<h2 id="åˆ¶ä½œç”µç£ç‚®"><a href="#åˆ¶ä½œç”µç£ç‚®" class="headerlink" title="åˆ¶ä½œç”µç£ç‚®"></a>åˆ¶ä½œç”µç£ç‚®</h2><p>ä½¿ç”¨æ¼†åŒ…çº¿åŒ…è£¹å‘å°„ç®¡ï¼Œæˆ‘ä»¬åˆ¶ä½œäº†ç”µç£ç‚®çš„ç‚®ç®¡ã€‚ä½¿ç”¨Boostç”µè·¯åˆ¶ä½œå‡å‹ï¼Œç”µå®¹æ¥å­˜å‚¨èƒ½é‡ã€‚å…³äºæ§åˆ¶ç”µç£ç‚®å‘å°„è·ç¦»ä½¿ç”¨çš„æ˜¯å›ºå®šå‘å°„ç”µå‹ã€è°ƒæ•´å‘å°„è§’åº¦çš„æ–¹æ³•ï¼Œä½¿ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨MATLABè¿›è¡Œæ•°æ®æ‹Ÿåˆã€‚æµ‹é‡è·ç¦»ä½¿ç”¨openmvä¸­è·ç¦»å’Œåƒç´ çš„å¤§å°æˆåæ¯”çš„å…³ç³»ã€‚ç³»ç»Ÿç»“æ„å›¾ã€DC-DCç”µè·¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="/images/electronicDesignContest/structure.png" alt="ç³»ç»Ÿç»“æ„å›¾"><br><img src="/images/electronicDesignContest/DC-DC.png" alt="DC-DC"></p>
<h2 id="å®ç‰©"><a href="#å®ç‰©" class="headerlink" title="å®ç‰©"></a>å®ç‰©</h2><p><img src="/images/electronicDesignContest/railgun.jpg" alt="railgun"></p>
<h2 id="æŠ¥å‘Š"><a href="#æŠ¥å‘Š" class="headerlink" title="æŠ¥å‘Š"></a>æŠ¥å‘Š</h2><p><a href="/others/railgunReport.docx">æŠ¥å‘Š</a></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>æˆ‘ä»¬ç»„çš„ç”µèµ›ä»£ç åœ¨<a href="https://github.com/qxdn/BIg-Ivan">è¿™</a>ï¼Œå–åå¤§ä¼Šä¸‡ï¼ˆç¬‘ï¼‰ã€‚è¿™é‡Œé¢è¿˜åŒ…å«ä¸€äº›è®­ç»ƒæ—¶æœŸçš„é¡¹ç›®ï¼Œéƒ½åœ¨gitåˆ†æ”¯é‡Œé¢ã€‚</p>
<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>åœ¨çœèµ›å’Œå›½èµ›çš„æ—¶å€™éƒ½æ‰“äº†å…¨åç¯ï¼ˆä¸å¾—ä¸è¯´è¿æ°”çœŸå¥½ï¼‰ï¼Œç„¶åå…¬è´¹å»ä¸Šæµ·åŒæµç©äº†å‡ å¤©ã€‚æœ€ç»ˆç»“æœå°±æ˜¯è·å¾—äº†ä¸€ä¸ªHé¢˜çš„å›½ä¸€äº†ï¼Œä¸ç®—å›½å®¶å¥–å­¦é‡‘çš„è¯ï¼Œè¿™æ˜¯æˆ‘è·å¾—çš„ç¬¬ä¸€ä¸ªç«èµ›å›½å¥–ã€‚<br><img src="/images/electronicDesignContest/edc.jpg" alt="åŒæµç°åœº"></p>
]]></content>
      <tags>
        <tag>ç”µèµ›</tag>
        <tag>C</tag>
        <tag>C++</tag>
        <tag>è½¯ä»¶</tag>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µèµ›å‡†å¤‡</title>
    <url>/2020/10/19/electronicDesignContestPerpare/</url>
    <content><![CDATA[<blockquote>
<p>ä¸»è¦ä¸ºå®éªŒå®¤ä¸­çš„ä¸€äº›ç»å†</p>
</blockquote>
<span id="more"></span>
<h2 id="è¿›å…¥606å®éªŒå®¤"><a href="#è¿›å…¥606å®éªŒå®¤" class="headerlink" title="è¿›å…¥606å®éªŒå®¤"></a>è¿›å…¥606å®éªŒå®¤</h2><p>&ensp;&ensp;åŠ å…¥å®éªŒå®¤éœ€è¦ç»è¿‡ç¬”è¯•ä»¥åŠé¢è¯•ã€‚æ‹›ç”Ÿæ—¶é—´é€šå¸¸ä¸ºå¤§ä¸€ä¸‹åˆ°å¤§äºŒä¸Šè¿™æ®µæ—¶é—´ã€‚ç¬”è¯•æœŸé—´ä¸»è¦ä¸ºã€Šç”µè·¯åˆ†æã€‹ã€ã€Šæ¨¡æ‹Ÿç”µå­æŠ€æœ¯åŸºç¡€ã€‹å’Œã€Šæ•°å­—ç”µå­æŠ€æœ¯åŸºç¡€ã€‹é‡Œé¢çš„çŸ¥è¯†ï¼Œè¿˜åŒ…æ‹¬å•ç‰‡æœºã€Cè¯­éŸ³ä»¥åŠIDEçš„ä¸€äº›çŸ¥è¯†ã€‚é¢è¯•ä¸»è¦çœ‹ä¸€äº›ä¸ªäººé¡¹ç›®ã€‚æˆ‘ä¸»è¦å±•ç¤ºäº†ä¸€äº›åœ¨403å®éªŒå®¤åˆ¶ä½œçš„æ°´æ¸©æ§åˆ¶ç³»ç»Ÿã€ä¸‡å¹´å†è¿˜æœ‰ä¸ªäººåˆ¶ä½œçš„ç®€æ˜“ç¤ºæ³¢å™¨ï¼ˆå› ä¸ºå½“æ—¶å¯¹ADCä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œè€Œä¸”ä¸çŸ¥é“å¥ˆå¥æ–¯ç‰¹æŠ½æ ·å®šç†ï¼Œæ‰€ä»¥åšçš„å¾ˆå°´å°¬ï¼‰ã€‚è¿›å…¥å®éªŒå®¤åå’Œå­¦é•¿è¿›è¡ŒåŒé€‰ï¼Œå› ä¸ºå½“æ—¶å’Œå¼ ä¿Šä¼Ÿã€ææ´‹ä¸€èµ·è¢«åˆ†é…åšç”µæºï¼Œæ‰€ä»¥æ‰¾äº†ä½™ä¸–æ°‘å­¦é•¿åšç”µæºã€‚</p>
<h2 id="606å®éªŒå®¤å­¦ä¹ "><a href="#606å®éªŒå®¤å­¦ä¹ " class="headerlink" title="606å®éªŒå®¤å­¦ä¹ "></a>606å®éªŒå®¤å­¦ä¹ </h2><p>&ensp;&ensp;åœ¨å®éªŒå®¤çš„ä¸ŠåŠä¸ªå­¦æœŸä¸»è¦ä¸ºå­¦ä¹ ï¼Œä»¥åŠå®Œæˆå®éªŒå®¤çš„ä»»åŠ¡ã€‚å®éªŒå®¤æœ‰ç€æ·˜æ±°æœºåˆ¶ï¼Œæ²¡æœ‰å®Œæˆé˜¶æ®µä»»åŠ¡ï¼Œåœ¨æœ€åå°±ä¼šè¢«æ·˜æ±°ã€‚é˜¶æ®µä»»åŠ¡ä¸»è¦ä¸ºä¸‰æç®¡æ”¾å¤§ç”µè·¯ã€è¿æ”¾ç”µè·¯ã€æ»¤æ³¢å™¨ç­‰ã€‚è™½ç„¶é¢˜ç›®çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å®é™…åšèµ·æ¥è¿˜æ˜¯ä¸ä¹¦ä¸Šçš„ç†æƒ³æƒ…å†µä¸ä¸€æ ·ã€‚å¹¸å¥½æœ€åæ²¡æœ‰è¢«æ·˜æ±°ã€‚</p>
<h2 id="è½¬ä¸ºæ§åˆ¶ç»„"><a href="#è½¬ä¸ºæ§åˆ¶ç»„" class="headerlink" title="è½¬ä¸ºæ§åˆ¶ç»„"></a>è½¬ä¸ºæ§åˆ¶ç»„</h2><p>&ensp;&ensp;åœ¨ä¸€æ®µæ—¶é—´çš„ç”µæºåˆ¶ä½œï¼ˆå…¶å®æ²¡æœ‰ï¼‰åï¼Œæˆ‘åè€Œå¯¹æ§åˆ¶é¢˜ç›®æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå°±åŠ å…¥äº†<a href="https://github.com/while0l1">æå¿—è±ª</a>ã€<a href="https://github.com/renruiwhut">ä»»ç¿</a>çš„å°ç»„ï¼Œä¸€èµ·åšæ§åˆ¶é¢˜ã€‚åˆ¶ä½œäº†ä¸€é˜¶å€’ç«‹æ‘†ã€è‡ªç”±æ‘†ã€æ¿çƒæ§åˆ¶ç³»ç»Ÿã€éº¦å…‹çº³å§†è½®å››è½®è½¦ã€æ‚¬æŒ‚ç³»ç»Ÿã€é£åŠ›æ‘†ã€äºŒè½®å¾ªè¿¹å¹³è¡¡è½¦ã€XYå†™å­—æœºå™¨äººç­‰é¡¹ç›®ã€‚</p>
<h2 id="å®ç‰©å›¾ç‰‡"><a href="#å®ç‰©å›¾ç‰‡" class="headerlink" title="å®ç‰©å›¾ç‰‡"></a>å®ç‰©å›¾ç‰‡</h2><p><img src="/images/electronicDesignContestPrepare/flb.gif" alt="é£åŠ›æ‘†"><br><img src="/images/electronicDesignContestPrepare/balanceCar.gif" alt="äºŒè½®å¹³è¡¡è½¦"><br><img src="/images/electronicDesignContestPrepare/XYWriter.gif" alt="XYå†™å­—æœºå™¨äºº"></p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>&ensp;&ensp;è¿™äº›å°±æ˜¯æˆ‘ä»¬ç»„åœ¨ç”µèµ›æœŸé—´çš„ä¸€äº›å‡†å¤‡å†…å®¹ï¼Œä»£ç ä¸»è¦åœ¨<a href="https://github.com/while0l1/stm32f4_modules">ä»£ç 1</a>å’Œ<a href="https://github.com/qxdn/MYDS">ä»£ç 2</a>å’Œ<a href="https://github.com/qxdn/BIg-Ivan">è®­ç»ƒä»£ç </a></p>
]]></content>
      <tags>
        <tag>ç”µèµ›</tag>
        <tag>C</tag>
        <tag>C++</tag>
        <tag>è½¯ä»¶</tag>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠ‚èƒ½å‡æ’</title>
    <url>/2020/10/19/energySaving/</url>
    <content><![CDATA[<blockquote>
<p>èŠ‚èƒ½å‡æ’å¤§èµ›çš„è®°å½•</p>
</blockquote>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åŸå…ˆçš„æ ¡å†…åˆé€‰ä¸­ï¼Œæˆ‘æœ€å…ˆå‚åŠ çš„ä¸èƒ½åŠ¨å­¦é™¢ä¸€èµ·çš„èŠ‚èƒ½å‡æ’åšçºµå€¾ä¼˜åŒ–çš„èˆ¹ï¼Œä½†æ˜¯æ²¡æœ‰é€šè¿‡åˆå®¡ã€‚äºæ˜¯å’Œæ±ªåšæ–‡ã€èµµä¹‹æ¸…ã€èƒ¡ç¾¤å¼ºã€ç‹ç‘æ—ã€ä»»ç¿ã€å­™æ–‡æ»¨ä¸€èµ·å‚åŠ èŠ‚èƒ½å‡æ’å¤§èµ›ï¼Œåˆ¶ä½œå…‰ä¼å±‹é¡¶ã€‚</p>
<span id="more"></span>

<h2 id="ç ”åˆ¶èƒŒæ™¯"><a href="#ç ”åˆ¶èƒŒæ™¯" class="headerlink" title="ç ”åˆ¶èƒŒæ™¯"></a>ç ”åˆ¶èƒŒæ™¯</h2><p>ä¼ ç»Ÿå…‰ä¼å±‹é¡¶çš„å‘ç”µæ•ˆç‡æ¯”è¾ƒä½ï¼Œå› æ­¤æˆ‘ä»¬è€ƒè™‘å°†ä¸€éƒ¨åˆ†å…‰ä¼æ¿æ¢æˆå¤©çª—ä½¿ç”¨ã€‚ç”±äºå¤©çª—ä¼šæœ‰ç°å°˜é›¨æ°´ç­‰ï¼Œæ¯”è¾ƒå®¹æ˜“è„ï¼Œéœ€è¦äººåŠ›æ¸…é™¤æˆæœ¬ã€‚å› æ­¤æˆ‘ä»¬å¯¹å¤©çª—æŒ¡æ¿åšæ™ºèƒ½å¤„ç†ï¼Œèƒ½å¤Ÿæ ¹æ®å¤©æ°”å…‰ç…§è‡ªåŠ¨æ§åˆ¶å¼€åˆè§’åº¦ï¼Œä½¿å¾—å…‰ç…§æœ€å¤§åŒ–åŒæ—¶å‡å°‘äººåŠ›æ¸…ç†æˆæœ¬ã€‚æ ¹æ®è´¾åšæ–‡è€å¸ˆè¯´ï¼Œè¿™ä¸ªè²Œä¼¼æ˜¯æ ¹æ®ä»–åœ¨æ–°åŠ å¡çœ‹åˆ°çš„ç›´æ¥æ›´æ”¹çš„ã€‚</p>
<h2 id="å®ç‰©"><a href="#å®ç‰©" class="headerlink" title="å®ç‰©"></a>å®ç‰©</h2><p>æˆ‘ä»¬ä¸»è¦åˆ¶ä½œäº†<a href="http://101.133.235.188/">æ™ºèƒ½è®¾è®¡å¹³å°</a>(ç°åœ¨åº”è¯¥ä¸Šä¸å»äº†)ã€æ‰‹æœºæ§åˆ¶å¹³å°å’Œå…‰ä¼å±‹é¡¶ã€‚ä¸‰ä¸ªä¹‹é—´çš„é€šä¿¡ä¸»è¦æ˜¯ä½¿ç”¨MQTTåè®®ã€‚<br><img src="/images/energySavingContest/design.png" alt="æ™ºèƒ½è®¾è®¡ç½‘é¡µ"><br><img src="/images/energySavingContest/controller.png" alt="æ™ºèƒ½æ§åˆ¶å¹³å°"><br><img src="/images/energySavingContest/roof.gif" alt="å…‰ä¼å±‹é¡¶"></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p><a href="https://github.com/qxdn/sunbest">æ™ºèƒ½è®¾è®¡å¹³å°</a>ã€<a href="https://github.com/qxdn/WindowController">å¤©çª—æ§åˆ¶å¹³å°</a>å’Œ<a href="https://github.com/qxdn/EnergySaveRoof">å®ç‰©ä¸8266ä»£ç </a>å› ä¸ºç–«æƒ…åŸå› è€Œä¸”ç»„å‘˜ä¹Ÿä¸æ˜¯å¾ˆä¼šå› æ­¤å®ç‰©ä»£ç æ¯”è¾ƒè€ã€ä½†æ˜¯8266çš„ä»£ç æ˜¯æœ€æ–°çš„ã€‚</p>
<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><p>æœ€åè¿˜æ˜¯åªå¾—äº†ä¸€ä¸ªå›½ä¸‰ï¼Œå¦‚æœå†åšçš„å¥½ä¸€ç‚¹ä¹Ÿè®¸å°±èƒ½è¿‡äº†ç½‘ç”³å†²å‡»å›½äºŒã€å›½ä¸€äº†ã€‚</p>
]]></content>
      <tags>
        <tag>C</tag>
        <tag>C++</tag>
        <tag>è½¯ä»¶</tag>
        <tag>ç¡¬ä»¶</tag>
        <tag>èŠ‚èƒ½å‡æ’</tag>
        <tag>java</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨AlexNetå®ç°DogsVsCats</title>
    <url>/2020/10/22/DogsVsCatsAlexNet/</url>
    <content><![CDATA[<blockquote>
<p>AlexNetå®ç°çŒ«ç‹—å¤§æˆ˜</p>
</blockquote>
<span id="more"></span>
<h2 id="AlexNet-å®ç°çŒ«ç‹—å¤§æˆ˜"><a href="#AlexNet-å®ç°çŒ«ç‹—å¤§æˆ˜" class="headerlink" title="AlexNet å®ç°çŒ«ç‹—å¤§æˆ˜"></a>AlexNet å®ç°çŒ«ç‹—å¤§æˆ˜</h2><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ—©å°±å¬è¯´è¿‡tensorflowçš„å¤§åï¼Œä½†ä¸€ç›´æ²¡æœ‰æ—¶é—´ä»”ç»†ç ”ç©¶ï¼Œè€Œä¸”ä¸€ç›´ç¼ºå°‘æ•°æ®é›†ï¼Œä¹Ÿå°±æ²¡æ€ä¹ˆäº†è§£ã€‚åŒæ—¶å› ä¸ºé‚£tensorflow1çš„å¤æ‚é™æ€å›¾ä¸€ç›´åŠé€€ã€‚å¦‚ä»Šæœ‰äº†æ—¶é—´ï¼Œè€Œä¸”tensorflow2æ›´åŠ æ˜“æ‡‚ï¼Œå› æ­¤ä»”ç»†ç ”ç©¶äº†ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡ç‚¼ä¸¹ã€‚é¦–å…ˆæ˜¯åœ¨<a href="https://www.kaggle.com/">kaggle</a>ä¸‹è½½æ•°æ®é›†å°±éš¾åˆ°æˆ‘äº†ï¼Œæ²¡æƒ³åˆ°ç¿»äº†å¢™è¿˜è¢«å›°åœ¨æ‰‹æœºå·éªŒè¯ã€‚æœ€ååªèƒ½å€ŸåŠ©äºå¾®è½¯æä¾›çš„æ•°æ®é›†ä¸‹è½½ã€‚æœ€å¼€å§‹ç”¨è‡ªå·±çš„CPUè·‘åˆæ…¢åˆå¡ï¼Œè‡ªä»æˆ‘æ¢äº†ç¡¬ç›˜åŠ äº†å†…å­˜ä»¥æ¥ï¼Œå¥½ä¹…éƒ½æ²¡æœ‰è¿™ä¹ˆå¡è¿‡äº†ã€‚</p>
<p><img src="/images/DogsVsCats/overload.png" alt="overload"></p>
<p>éšåæ¢ä¸Šäº†Googleçš„<a href="https://colab.research.google.com/notebooks/intro.ipynb#">colab</a>,ç”¨äº†å…è´¹GPUæ‰çŸ¥é“GPUçš„å¥½ã€‚</p>
<blockquote>
<p>ä»¥ä¸‹æ­£æ–‡</p>
</blockquote>
<h2 id="1ã€æ•°æ®å‡†å¤‡"><a href="#1ã€æ•°æ®å‡†å¤‡" class="headerlink" title="1ã€æ•°æ®å‡†å¤‡"></a>1ã€æ•°æ®å‡†å¤‡</h2><p>åœ¨Colabä¸Šéœ€è¦ä¸‹è½½æ•°æ®å’Œå‡†å¤‡ç¯å¢ƒï¼Œå·²ç»å°†æ•°æ®ä¸Šä¼ åˆ°äº†Github</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">!pip install tensorflow</span><br><span class="line">!wget https://github.com/qxdn/DogsVsCats/releases/download/v1<span class="number">.0</span><span class="number">.0</span>/data.<span class="built_in">zip</span></span><br><span class="line">!unzip data.<span class="built_in">zip</span></span><br><span class="line">!rm -rf data.<span class="built_in">zip</span></span><br></pre></td></tr></table></figure>

<p>AlexNetçš„è¾“å…¥æ˜¯<code>[227,227,3]</code>ï¼Œå› æ­¤è¦å¯¹è¾“å…¥è¿›è¡Œé¢„å¤„ç†ï¼Œä½¿å¾—ç¬¦åˆè§„èŒƒï¼ŒåŒæ—¶è¿˜éœ€è¦è¿›è¡Œè´´æ ‡ç­¾(dog=1,cat=0)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> layers,models</span><br><span class="line"></span><br><span class="line">BATCH_SIZE = <span class="number">125</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_image</span>(<span class="params">img_path,size=(<span class="params"><span class="number">227</span>,<span class="number">227</span></span>)</span>):</span></span><br><span class="line">    label = tf.constant(<span class="number">0</span>,tf.int8) <span class="keyword">if</span> tf.strings.regex_full_match(img_path,<span class="string">&quot;.*cat.*&quot;</span>) \</span><br><span class="line">            <span class="keyword">else</span> tf.constant(<span class="number">1</span>,tf.int8)</span><br><span class="line">    img = tf.io.read_file(img_path)</span><br><span class="line">    img = tf.image.decode_jpeg(img) </span><br><span class="line">    img = tf.image.resize(img,size)/<span class="number">255.0</span>  <span class="comment">#è½¬floatè¦å½’ä¸€</span></span><br><span class="line">    <span class="keyword">return</span>(img,label)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç”¨å¹¶è¡ŒåŒ–é¢„å¤„ç†num_parallel_calls å’Œé¢„å­˜æ•°æ®prefetchæ¥æå‡æ€§èƒ½</span></span><br><span class="line"><span class="comment"># num_parallel_calls=tf.data.experimental.AUTOTUNE æ ¹æ®CPUåŠ¨æ€å¤„ç† æœªæŒ‡å®šå°±é¡ºåºå¤„ç†</span></span><br><span class="line"><span class="comment">#shuffle éšæœºé‡æ’</span></span><br><span class="line"><span class="comment">#batch()ä¸€æ¬¡å‡ºå¤šå°‘</span></span><br><span class="line"><span class="comment">#prefetch æå‰å–å‡ºå¤šå°‘æ‰¹batch</span></span><br><span class="line">ds_train = tf.data.Dataset.list_files(<span class="string">&quot;./data/train/*.jpg&quot;</span>) \</span><br><span class="line">           .<span class="built_in">map</span>(load_image, num_parallel_calls=tf.data.experimental.AUTOTUNE) \</span><br><span class="line">           .shuffle(buffer_size = <span class="number">1000</span>).batch(BATCH_SIZE) \</span><br><span class="line">           .prefetch(tf.data.experimental.AUTOTUNE)  </span><br><span class="line"></span><br><span class="line">ds_test = tf.data.Dataset.list_files(<span class="string">&quot;./data/test/*.jpg&quot;</span>) \</span><br><span class="line">           .<span class="built_in">map</span>(load_image, num_parallel_calls=tf.data.experimental.AUTOTUNE) \</span><br><span class="line">           .batch(BATCH_SIZE) \</span><br><span class="line">           .prefetch(tf.data.experimental.AUTOTUNE)  </span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">&#x27;svg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è®­ç»ƒæ ·æœ¬</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">8</span>))  <span class="comment">#8*8 inch</span></span><br><span class="line"><span class="keyword">for</span> i,(img,label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(ds_train.unbatch().take(<span class="number">9</span>)):  <span class="comment">#enumerate ç»„åˆæˆç´¢å¼•ã€æ•°æ®è¿­ä»£</span></span><br><span class="line">    ax=plt.subplot(<span class="number">3</span>,<span class="number">3</span>,i+<span class="number">1</span>)</span><br><span class="line">    ax.imshow(img.numpy())</span><br><span class="line">    ax.set_title(<span class="string">&quot;label = %d&quot;</span>%label)</span><br><span class="line">    ax.set_xticks([])</span><br><span class="line">    ax.set_yticks([]) </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/DogsVsCats/output_7_0.svg"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x,y <span class="keyword">in</span> ds_train.take(<span class="number">1</span>):</span><br><span class="line">    print(x.shape,y.shape)</span><br></pre></td></tr></table></figure>

<pre><code>(125, 227, 227, 3) (125,)
</code></pre>
<h2 id="2ã€å®šä¹‰æ¨¡å‹"><a href="#2ã€å®šä¹‰æ¨¡å‹" class="headerlink" title="2ã€å®šä¹‰æ¨¡å‹"></a>2ã€å®šä¹‰æ¨¡å‹</h2><p>AlexNetç›¸è¾ƒäºä»¥å‰çš„ç½‘ç»œä¸»è¦å¼•å…¥äº†Reluæ¿€æ´»å‡½æ•°ã€DropOutå±‚å’Œlrnå±€éƒ¨å“åº”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># LRNå±‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRN</span>(<span class="params">layers.Layer</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(LRN, self).__init__()</span><br><span class="line">        self.depth_radius=<span class="number">2</span></span><br><span class="line">        self.bias=<span class="number">1</span></span><br><span class="line">        self.alpha=<span class="number">1e-4</span></span><br><span class="line">        self.beta=<span class="number">0.75</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span>(<span class="params">self,x</span>):</span></span><br><span class="line">        <span class="keyword">return</span> tf.nn.lrn(x,depth_radius=self.depth_radius,</span><br><span class="line">                         bias=self.bias,alpha=self.alpha,</span><br><span class="line">                         beta=self.beta)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tf.keras.backend.clear_session() <span class="comment">#æ¸…ç©ºä¼šè¯</span></span><br><span class="line"></span><br><span class="line">model = models.Sequential()</span><br><span class="line">model.add(layers.Conv2D(<span class="number">96</span>,kernel_size=(<span class="number">11</span>,<span class="number">11</span>),activation=<span class="string">&#x27;relu&#x27;</span>,strides=(<span class="number">4</span>,<span class="number">4</span>),input_shape=(<span class="number">227</span>,<span class="number">227</span>,<span class="number">3</span>)))</span><br><span class="line">model.add(layers.MaxPool2D(pool_size=(<span class="number">3</span>, <span class="number">3</span>),strides=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line">model.add(LRN())</span><br><span class="line">model.add(layers.Conv2D(<span class="number">256</span>,kernel_size=(<span class="number">5</span>,<span class="number">5</span>),activation=<span class="string">&#x27;relu&#x27;</span>,strides=(<span class="number">1</span>,<span class="number">1</span>),padding=<span class="string">&#x27;same&#x27;</span>))</span><br><span class="line">model.add(layers.MaxPool2D(pool_size=(<span class="number">3</span>, <span class="number">3</span>),strides=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line">model.add(LRN())</span><br><span class="line">model.add(layers.Conv2D(<span class="number">384</span>,kernel_size=(<span class="number">3</span>,<span class="number">3</span>),activation=<span class="string">&#x27;relu&#x27;</span>,strides=(<span class="number">1</span>,<span class="number">1</span>),padding=<span class="string">&#x27;same&#x27;</span>))</span><br><span class="line">model.add(layers.Conv2D(<span class="number">384</span>,kernel_size=(<span class="number">3</span>,<span class="number">3</span>),activation=<span class="string">&#x27;relu&#x27;</span>,strides=(<span class="number">1</span>,<span class="number">1</span>),padding=<span class="string">&#x27;same&#x27;</span>))</span><br><span class="line">model.add(layers.Conv2D(<span class="number">256</span>,kernel_size=(<span class="number">3</span>,<span class="number">3</span>),activation=<span class="string">&#x27;relu&#x27;</span>,strides=(<span class="number">1</span>,<span class="number">1</span>),padding=<span class="string">&#x27;same&#x27;</span>))</span><br><span class="line">model.add(layers.MaxPool2D(pool_size=(<span class="number">3</span>, <span class="number">3</span>),strides=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line">model.add(layers.Flatten()) <span class="comment"># ä¸è¦å¿˜è®°æœ‰ä¸€å±‚é™ä¸ºä¸€ç»´</span></span><br><span class="line">model.add(layers.Dense(<span class="number">4096</span>,activation=<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line">model.add(layers.Dropout(<span class="number">0.25</span>))</span><br><span class="line">model.add(layers.Dense(<span class="number">4096</span>,activation=<span class="string">&#x27;relu&#x27;</span>))</span><br><span class="line">model.add(layers.Dropout(<span class="number">0.25</span>))</span><br><span class="line">model.add(layers.Dense(<span class="number">2</span>,activation=<span class="string">&#x27;softmax&#x27;</span>))  <span class="comment">#çœŸå®çš„AlexNetä¼šåˆ†æˆ1000ç±»ï¼Œæ­¤å¤„åˆ†2ç±» sofmaxæ¥è®¡ç®—æ¦‚ç‡</span></span><br><span class="line"></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>

<pre><code>Model: &quot;sequential&quot;
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
conv2d (Conv2D)              (None, 55, 55, 96)        34944     
_________________________________________________________________
max_pooling2d (MaxPooling2D) (None, 27, 27, 96)        0         
_________________________________________________________________
lrn (LRN)                    (None, 27, 27, 96)        0         
_________________________________________________________________
conv2d_1 (Conv2D)            (None, 27, 27, 256)       614656    
_________________________________________________________________
max_pooling2d_1 (MaxPooling2 (None, 13, 13, 256)       0         
_________________________________________________________________
lrn_1 (LRN)                  (None, 13, 13, 256)       0         
_________________________________________________________________
conv2d_2 (Conv2D)            (None, 13, 13, 384)       885120    
_________________________________________________________________
conv2d_3 (Conv2D)            (None, 13, 13, 384)       1327488   
_________________________________________________________________
conv2d_4 (Conv2D)            (None, 13, 13, 256)       884992    
_________________________________________________________________
max_pooling2d_2 (MaxPooling2 (None, 6, 6, 256)         0         
_________________________________________________________________
flatten (Flatten)            (None, 9216)              0         
_________________________________________________________________
dense (Dense)                (None, 4096)              37752832  
_________________________________________________________________
dropout (Dropout)            (None, 4096)              0         
_________________________________________________________________
dense_1 (Dense)              (None, 4096)              16781312  
_________________________________________________________________
dropout_1 (Dropout)          (None, 4096)              0         
_________________________________________________________________
dense_2 (Dense)              (None, 2)                 8194      
=================================================================
Total params: 58,289,538
Trainable params: 58,289,538
Non-trainable params: 0
_________________________________________________________________
</code></pre>
<h2 id="3ã€è®­ç»ƒæ¨¡å‹"><a href="#3ã€è®­ç»ƒæ¨¡å‹" class="headerlink" title="3ã€è®­ç»ƒæ¨¡å‹"></a>3ã€è®­ç»ƒæ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">model.<span class="built_in">compile</span>(optimizer=tf.keras.optimizers.Adam(learning_rate=<span class="number">0.00001</span>),</span><br><span class="line">        loss=<span class="string">&#x27;sparse_categorical_crossentropy&#x27;</span>,</span><br><span class="line">        metrics=[<span class="string">&quot;accuracy&quot;</span>])</span><br><span class="line"></span><br><span class="line">checkpoint_save_path=<span class="string">&#x27;./checkpoint/AlexNet/AlexNet-&#123;epoch:02d&#125;.ckpt&#x27;</span></span><br><span class="line"><span class="comment">#tfç”Ÿæˆckptæ–‡ä»¶æ—¶ä¼šåŒæ­¥ç”Ÿæˆç´¢å¼•è¡¨ï¼Œé‚£ä¹ˆé€šè¿‡åˆ¤æ–­æ˜¯å¦æœ‰ç´¢å¼•è¡¨ï¼Œå°±çŸ¥é“æœ‰æ²¡æœ‰ä¿å­˜è¿‡å‚æ•°ã€‚</span></span><br><span class="line"><span class="keyword">if</span> os.path.exists(checkpoint_save_path+<span class="string">&#x27;.index&#x27;</span>):</span><br><span class="line">    print(<span class="string">&#x27;----------------load the model--------------&#x27;</span>)</span><br><span class="line">    model.load_weights(checkpoint_save_path)</span><br><span class="line">cp_callback=tf.keras.callbacks.ModelCheckpoint(filepath=checkpoint_save_path,</span><br><span class="line">                            save_weights_only=<span class="literal">True</span>,</span><br><span class="line">                            save_best_only=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">history = model.fit(ds_train,epochs= <span class="number">20</span>,validation_data=ds_test,</span><br><span class="line">                    callbacks = [cp_callback],workers = <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Epoch 1/20
184/184 [==============================] - 40s 219ms/step - loss: 0.6630 - accuracy: 0.5944 - val_loss: 0.6141 - val_accuracy: 0.6615
Epoch 2/20
184/184 [==============================] - 40s 220ms/step - loss: 0.5970 - accuracy: 0.6754 - val_loss: 0.5586 - val_accuracy: 0.7040
Epoch 3/20
184/184 [==============================] - 40s 219ms/step - loss: 0.5426 - accuracy: 0.7244 - val_loss: 0.5088 - val_accuracy: 0.7505
Epoch 4/20
184/184 [==============================] - 40s 219ms/step - loss: 0.4946 - accuracy: 0.7598 - val_loss: 0.4840 - val_accuracy: 0.7735
Epoch 5/20
184/184 [==============================] - 40s 220ms/step - loss: 0.4545 - accuracy: 0.7852 - val_loss: 0.4469 - val_accuracy: 0.8055
Epoch 6/20
184/184 [==============================] - 40s 220ms/step - loss: 0.4207 - accuracy: 0.8064 - val_loss: 0.4180 - val_accuracy: 0.8100
Epoch 7/20
184/184 [==============================] - 40s 219ms/step - loss: 0.3991 - accuracy: 0.8193 - val_loss: 0.4016 - val_accuracy: 0.8250
Epoch 8/20
184/184 [==============================] - 41s 220ms/step - loss: 0.3788 - accuracy: 0.8309 - val_loss: 0.3908 - val_accuracy: 0.8315
Epoch 9/20
184/184 [==============================] - 40s 219ms/step - loss: 0.3587 - accuracy: 0.8427 - val_loss: 0.3733 - val_accuracy: 0.8375
Epoch 10/20
184/184 [==============================] - 38s 207ms/step - loss: 0.3387 - accuracy: 0.8539 - val_loss: 0.3860 - val_accuracy: 0.8345
Epoch 11/20
184/184 [==============================] - 40s 220ms/step - loss: 0.3273 - accuracy: 0.8576 - val_loss: 0.3498 - val_accuracy: 0.8475
Epoch 12/20
184/184 [==============================] - 38s 207ms/step - loss: 0.3064 - accuracy: 0.8676 - val_loss: 0.3671 - val_accuracy: 0.8380
Epoch 13/20
184/184 [==============================] - 38s 208ms/step - loss: 0.2931 - accuracy: 0.8762 - val_loss: 0.3501 - val_accuracy: 0.8495
Epoch 14/20
184/184 [==============================] - 40s 220ms/step - loss: 0.2737 - accuracy: 0.8864 - val_loss: 0.3361 - val_accuracy: 0.8540
Epoch 15/20
184/184 [==============================] - 40s 219ms/step - loss: 0.2694 - accuracy: 0.8890 - val_loss: 0.3311 - val_accuracy: 0.8585
Epoch 16/20
184/184 [==============================] - 38s 208ms/step - loss: 0.2557 - accuracy: 0.8938 - val_loss: 0.3388 - val_accuracy: 0.8565
Epoch 17/20
184/184 [==============================] - 40s 219ms/step - loss: 0.2362 - accuracy: 0.9030 - val_loss: 0.3160 - val_accuracy: 0.8680
Epoch 18/20
184/184 [==============================] - 38s 207ms/step - loss: 0.2184 - accuracy: 0.9106 - val_loss: 0.3692 - val_accuracy: 0.8515
Epoch 19/20
184/184 [==============================] - 38s 207ms/step - loss: 0.2085 - accuracy: 0.9160 - val_loss: 0.3198 - val_accuracy: 0.8710
Epoch 20/20
184/184 [==============================] - 41s 222ms/step - loss: 0.1909 - accuracy: 0.9239 - val_loss: 0.3019 - val_accuracy: 0.8705
</code></pre>
<h2 id="4ã€è¯„ä¼°æ¨¡å‹"><a href="#4ã€è¯„ä¼°æ¨¡å‹" class="headerlink" title="4ã€è¯„ä¼°æ¨¡å‹"></a>4ã€è¯„ä¼°æ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">&#x27;svg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_metric</span>(<span class="params">history, metric</span>):</span></span><br><span class="line">    train_metrics = history.history[metric]</span><br><span class="line">    val_metrics = history.history[<span class="string">&#x27;val_&#x27;</span>+metric]</span><br><span class="line">    epochs = <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(train_metrics) + <span class="number">1</span>)</span><br><span class="line">    plt.plot(epochs, train_metrics, <span class="string">&#x27;bo--&#x27;</span>)</span><br><span class="line">    plt.plot(epochs, val_metrics, <span class="string">&#x27;ro-&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Training and validation &#x27;</span>+ metric)</span><br><span class="line">    plt.xlabel(<span class="string">&quot;Epochs&quot;</span>)</span><br><span class="line">    plt.ylabel(metric)</span><br><span class="line">    plt.legend([<span class="string">&quot;train_&quot;</span>+metric, <span class="string">&#x27;val_&#x27;</span>+metric])</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plot_metric(history,<span class="string">&quot;loss&quot;</span>) <span class="comment">#ç»“æœçœ‹å¯ä»¥å†ç»ƒç»ƒ</span></span><br></pre></td></tr></table></figure>


<p><img src="/images/DogsVsCats/output_16_0.svg"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plot_metric(history,<span class="string">&quot;accuracy&quot;</span>)</span><br></pre></td></tr></table></figure>


<p><img src="/images/DogsVsCats/output_17_0.svg"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯ä»¥ä½¿ç”¨evaluateå¯¹æ•°æ®è¿›è¡Œè¯„ä¼°</span></span><br><span class="line">val_loss,val_accuracy = model.evaluate(ds_test,workers=<span class="number">4</span>)</span><br><span class="line">print(val_loss,val_accuracy)</span><br></pre></td></tr></table></figure>

<pre><code>16/16 [==============================] - 2s 144ms/step - loss: 0.3019 - accuracy: 0.8705
0.3018629252910614 0.8705000281333923
</code></pre>
<h2 id="5ã€ä½¿ç”¨æ¨¡å‹"><a href="#5ã€ä½¿ç”¨æ¨¡å‹" class="headerlink" title="5ã€ä½¿ç”¨æ¨¡å‹"></a>5ã€ä½¿ç”¨æ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">perpareImage</span>(<span class="params">img,sizes=(<span class="params">-<span class="number">1</span>,<span class="number">227</span>,<span class="number">227</span>,<span class="number">3</span></span>)</span>):</span></span><br><span class="line">  img = tf.reshape(img,shape=sizes)</span><br><span class="line">  <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i,(img,label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(ds_test.unbatch().take(<span class="number">1</span>)):</span><br><span class="line">  img=tf.reshape(img,shape=(-<span class="number">1</span>,<span class="number">227</span>,<span class="number">227</span>,<span class="number">3</span>))</span><br><span class="line">  p=model.predict(img)</span><br><span class="line">  print(p)</span><br><span class="line">  p=tf.argmax(p,<span class="number">1</span>)</span><br><span class="line">  print(p)</span><br><span class="line">  print(p.shape)</span><br></pre></td></tr></table></figure>

<pre><code>[[0.91607434 0.08392565]]
tf.Tensor([0], shape=(1,), dtype=int64)
(1,)
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = <span class="string">&#x27;svg&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥çœ‹è®­ç»ƒæ ·æœ¬</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>,<span class="number">8</span>))  <span class="comment">#8*8 inch</span></span><br><span class="line"><span class="keyword">for</span> i,(img,label) <span class="keyword">in</span> <span class="built_in">enumerate</span>(ds_test.unbatch().take(<span class="number">9</span>)):  <span class="comment">#enumerate ç»„åˆæˆç´¢å¼•ã€æ•°æ®è¿­ä»£</span></span><br><span class="line">    ax=plt.subplot(<span class="number">3</span>,<span class="number">3</span>,i+<span class="number">1</span>)</span><br><span class="line">    ax.imshow(img.numpy())</span><br><span class="line">    predict = model.predict(perpareImage(img))</span><br><span class="line">    ax.set_title(<span class="string">&quot;predict=%d,label=%d&quot;</span>%(tf.argmax(predict,<span class="number">1</span>),label))</span><br><span class="line">    ax.set_xticks([])</span><br><span class="line">    ax.set_yticks([]) </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/DogsVsCats/output_22_0.svg"></p>
<h2 id="6ã€ä¿å­˜æ¨¡å‹"><a href="#6ã€ä¿å­˜æ¨¡å‹" class="headerlink" title="6ã€ä¿å­˜æ¨¡å‹"></a>6ã€ä¿å­˜æ¨¡å‹</h2><p>tensorflowåŸç”Ÿä¿å­˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¿å­˜æ¨¡å‹ç»“æ„ä¸æ¨¡å‹å‚æ•°åˆ°æ–‡ä»¶,è¯¥æ–¹å¼ä¿å­˜çš„æ¨¡å‹å…·æœ‰è·¨å¹³å°æ€§ä¾¿äºéƒ¨ç½²</span></span><br><span class="line"></span><br><span class="line">model.save(<span class="string">&#x27;./model/tf_AlexNet_Model&#x27;</span>, save_format=<span class="string">&quot;tf&quot;</span>)</span><br><span class="line">print(<span class="string">&#x27;export saved model.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">model_loaded = tf.keras.models.load_model(<span class="string">&#x27;./model/tf_AlexNet_Model&#x27;</span>)</span><br><span class="line">model_loaded.evaluate(ds_test)</span><br></pre></td></tr></table></figure>

<pre><code>WARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/tracking.py:111: Model.state_updates (from tensorflow.python.keras.engine.training) is deprecated and will be removed in a future version.
Instructions for updating:
This property should not be used in TensorFlow 2.0, as updates are applied automatically.
WARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/tracking.py:111: Layer.updates (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.
Instructions for updating:
This property should not be used in TensorFlow 2.0, as updates are applied automatically.
INFO:tensorflow:Assets written to: ./model/tf_AlexNet_Model/assets
export saved model.
16/16 [==============================] - 2s 147ms/step - loss: 0.3019 - accuracy: 0.5155





[0.301862895488739, 0.515500009059906]
</code></pre>
<h2 id="repo"><a href="#repo" class="headerlink" title="repo"></a>repo</h2><p><a href="https://github.com/qxdn/DogsVsCats">DogsVsCats</a></p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¸©çš„å‘æœ‰ç‚¹ç‚¹å¤šï¼Œæ¯”å¦‚æ­å»ºç½‘ç»œæ—¶å€™å¿˜è®°æ‘Šå¹³ï¼Œé¢„æµ‹çš„æ—¶å€™å› ä¸ºå½¢çŠ¶ä¸å¯¹å¡äº†åŠå¤©ï¼ŒCPUè®­ç»ƒçš„æ—¶å€™losså’Œå‡†ç¡®åº¦ä¸å˜ï¼Œå·®ç‚¹ä»¥ä¸ºå¤±è´¥äº†ï¼Œä¸è¿‡æœ€åçœ‹æ¥è¿˜ç®—æˆåŠŸå§ã€‚èµç¾Google Colabã€‚</p>
]]></content>
      <tags>
        <tag>python</tag>
        <tag>tensorflow</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>AlexNet</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡çº§åˆ°WSL2</title>
    <url>/2020/10/23/upgradeWSL2/</url>
    <content><![CDATA[<blockquote>
<p>å°†WSL1å‡çº§åˆ°WSL2</p>
</blockquote>
<span id="more"></span>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å› ä¸ºä¸€äº›ä¸ªäººåŸå› ï¼Œéœ€è¦å°†åŸå…ˆçš„WSL1å‡çº§åˆ°WSL2ï¼Œå‚è€ƒ<a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-win10">å¾®è½¯æ–‡æ¡£</a>ï¼Œè®°å½•è¸©å‘</p>
<h2 id="ä¸€ã€æ£€æŸ¥ç‰ˆæœ¬"><a href="#ä¸€ã€æ£€æŸ¥ç‰ˆæœ¬" class="headerlink" title="ä¸€ã€æ£€æŸ¥ç‰ˆæœ¬"></a>ä¸€ã€æ£€æŸ¥ç‰ˆæœ¬</h2><p>å¯¹äºx64ç³»ç»Ÿç›®å‰çš„è¦æ±‚æ˜¯<code>1903</code>æˆ–è€…æ›´é«˜,<code>Build 18362</code>æˆ–è€…æ›´é«˜ã€‚ä½¿ç”¨<code>win+R</code>è¾“å…¥<code>winver</code>æ¥æ£€æŸ¥è‡ªå·±çš„ç‰ˆæœ¬<br><img src="/images/post-upgradeWSL/version.png" alt="version"></p>
<h2 id="äºŒã€å¯åŠ¨è™šæ‹ŸæœºåŠŸèƒ½"><a href="#äºŒã€å¯åŠ¨è™šæ‹ŸæœºåŠŸèƒ½" class="headerlink" title="äºŒã€å¯åŠ¨è™šæ‹ŸæœºåŠŸèƒ½"></a>äºŒã€å¯åŠ¨è™šæ‹ŸæœºåŠŸèƒ½</h2><p>ç®¡ç†å‘˜æ¨¡å¼å¯åŠ¨powershellè¾“å…¥</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>
<p><img src="/images/post-upgradeWSL/enableVMFeature.png" alt="å¯åŠ¨è™šæ‹ŸæœºåŠŸèƒ½"><br><strong>ç„¶åé‡å¯ç”µè„‘</strong></p>
<h2 id="ä¸‰ã€ä¸‹è½½Linuxå†…æ ¸å‡çº§åŒ…"><a href="#ä¸‰ã€ä¸‹è½½Linuxå†…æ ¸å‡çº§åŒ…" class="headerlink" title="ä¸‰ã€ä¸‹è½½Linuxå†…æ ¸å‡çº§åŒ…"></a>ä¸‰ã€ä¸‹è½½Linuxå†…æ ¸å‡çº§åŒ…</h2><p>ä¸‹è½½æœ€æ–°<a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">å‡çº§åŒ…</a><br><img src="/images/post-upgradeWSL/package.png" alt="package"></p>
<h2 id="å››ã€è®¾ç½®WSL2ä½œä¸ºé»˜è®¤ç‰ˆæœ¬"><a href="#å››ã€è®¾ç½®WSL2ä½œä¸ºé»˜è®¤ç‰ˆæœ¬" class="headerlink" title="å››ã€è®¾ç½®WSL2ä½œä¸ºé»˜è®¤ç‰ˆæœ¬"></a>å››ã€è®¾ç½®WSL2ä½œä¸ºé»˜è®¤ç‰ˆæœ¬</h2><p>ç®¡ç†å‘˜powershellä¸­è¿è¡Œ</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl -<span class="literal">-set</span><span class="literal">-default</span><span class="literal">-version</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€è½¬æ¢WSL"><a href="#äº”ã€è½¬æ¢WSL" class="headerlink" title="äº”ã€è½¬æ¢WSL"></a>äº”ã€è½¬æ¢WSL</h2><p>ä½¿ç”¨è¯¥æŒ‡ä»¤æŸ¥çœ‹wslçŠ¶æ€</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">-l</span> <span class="literal">-v</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘çš„è¾“å‡º</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">  NAME      STATE           VERSION</span><br><span class="line">* Ubuntu    Stopped         <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>è½¬æ¢WSL</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl -<span class="literal">-set</span><span class="literal">-version</span> Ubuntu <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´...</span><br><span class="line">æœ‰å…³ä¸ WSL <span class="number">2</span> çš„ä¸»è¦åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2</span><br><span class="line">è¯·å¯ç”¨è™šæ‹Ÿæœºå¹³å° Windows åŠŸèƒ½å¹¶ç¡®ä¿åœ¨ BIOS ä¸­å¯ç”¨è™šæ‹ŸåŒ–ã€‚</span><br><span class="line">æœ‰å…³ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2<span class="literal">-install</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåœ¨æˆ‘æœç´¢äº†<a href="https://github.com/microsoft/WSL/issues/5363">issue</a>åå‘ç°ä¸»è¦è¿˜æ˜¯Hyper-Vã€è™šæ‹Ÿå¹³å°ç­‰é—®é¢˜ï¼Œå¯ä»¥è¯•ä¸€è¯•ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œä»¥ä¸‹æŒ‡ä»¤</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">DISM /Online /<span class="built_in">Enable-Feature</span> /All /FeatureName:Microsoft<span class="literal">-Hyper</span><span class="literal">-V</span></span><br><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:Microsoft<span class="literal">-Windows</span><span class="literal">-Subsystem</span><span class="literal">-Linux</span> /all /norestart</span><br><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:VirtualMachinePlatform /all /norestart</span><br><span class="line">bcdedit /<span class="built_in">set</span> hypervisorlaunchtype auto</span><br></pre></td></tr></table></figure>
<p>æœ€ä¸»è¦çš„åº”è¯¥æ˜¯</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">DISM /Online /<span class="built_in">Enable-Feature</span> /All /FeatureName:Microsoft<span class="literal">-Hyper</span><span class="literal">-V</span></span><br><span class="line">bcdedit /<span class="built_in">set</span> hypervisorlaunchtype auto</span><br></pre></td></tr></table></figure>

<p>é‡æ–°è½¬æ¢<br><img src="/images/post-upgradeWSL/converted.png" alt="è½¬æ¢å®Œæˆ"></p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>VMwareè€ç‰ˆæœ¬ä¸Hyper-Vå†²çªï¼Œå¾—æ‰¾ä¸ªæ—¶é—´å»æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬å…¼å®¹</p>
]]></content>
      <tags>
        <tag>Windows</tag>
        <tag>Linux</tag>
        <tag>WSL</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯•ä¸šè®¾è®¡ï¼ˆä¸€ï¼‰ç¯å¢ƒæ­å»º</title>
    <url>/2021/01/18/installpytorch/</url>
    <content><![CDATA[<blockquote>
<p>æ¯•è®¾pytorchç¯å¢ƒæ­å»º</p>
</blockquote>
<span id="more"></span>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½“éªŒè¿‡CPUå’ŒGPUé€Ÿåº¦ä¹‹åï¼Œå°±ä¸ä¼šå†æƒ³ä½¿ç”¨CPUç‰ˆæœ¬çš„æœºå™¨å­¦ä¹ æ¡†æ¶è¿›è¡Œè®­ç»ƒã€‚</p>
<h2 id="å®‰è£…CUDA"><a href="#å®‰è£…CUDA" class="headerlink" title="å®‰è£…CUDA"></a>å®‰è£…CUDA</h2><p>ç¬¬ä¸€æ­¥å°±æ˜¯è¦å®Œæˆcudaçš„å®‰è£…ï¼Œè¿›å…¥<code>NIVIDAæ§åˆ¶é¢æ¿</code>-&gt;<code>ç³»ç»Ÿä¿¡æ¯</code>-&gt;<code>ç»„ä»¶</code>ï¼ŒæŸ¥çœ‹<code>3Dè®¾ç½®</code>ä¸­çš„<code>NVCUDA64.DLL</code>ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„å°±æ˜¯å½“å‰æ˜¾å¡é©±åŠ¨æ‰€æ”¯æŒçš„CUDAä¿¡æ¯ï¼Œæ‰€è¦å®‰è£…çš„CUDAç‰ˆæœ¬ä¸å¾—å¤§äºè¿™é‡Œæ˜¾ç¤ºçš„ç‰ˆæœ¬ã€‚ç„¶åå‰å¾€<a href="https://developer.nvidia.com/zh-cn/cuda-downloads">CUDAå®˜ç½‘</a>ä¸‹è½½CUDAã€‚å»ºè®®åœ¨ä¸‹è½½ä¹‹å‰å…ˆå»å…¶ä»–ä¸€äº›ç½‘å€çœ‹ä¸€ä¸‹æ”¯æŒçš„CUDAç‰ˆæœ¬ï¼Œä»¥å…åˆ°æ—¶å€™é‡æ–°å®‰è£…</p>
<ul>
<li><a href="https://tensorflow.google.cn/install/source_windows">tensorflow</a> (æ¢æˆEnglishå¯ä»¥çœ‹æœ€æ–°æ”¯æŒ)</li>
<li><a href="https://pytorch.org/get-started/locally/">pytorch</a></li>
</ul>
<p><img src="/images/GraduationProject/GPUInfo.png" alt="GPUä¿¡æ¯"></p>
<p>å¦‚æœå‘ç°è‡ªå·±å®‰è£…çš„ç‰ˆæœ¬æ²¡æœ‰å·²ç»æ„å»ºå¥½çš„ç‰ˆæœ¬è¿˜æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p>
<ul>
<li>è‡ªè¡Œä»æºç ç¼–è¯‘ï¼Œè¿™ç‚¹ä¸æ¨èï¼Œæƒ³èµ·æ¥æˆ‘ä¹‹é—´è‡ªå·±åœ¨æ ‘è“æ´¾ä¸Šé¢ç¼–è¯‘opencvçš„ç»å†é¢œæ–‡å­—(à²¥ _ à²¥)ï¼Œå¼ºçƒˆä¸æ¨èã€‚</li>
<li>å¸è½½é‡è£…CUDA</li>
</ul>
<p>é‡è£…CUDAæ¯”è¾ƒç®€å•,è§ä¸‹å›¾ä¸­çš„NVIDIAåº”ç”¨é™¤äº†<code>NVIDIAçš„å›¾å½¢é©±åŠ¨ç¨‹åº</code>å’Œ<code>NVIDIA Physxç³»ç»Ÿè½¯ä»¶</code>éƒ½å¸è½½å°±è¡Œã€‚å¦‚æœä¸‹ä¸åŠ¨çš„å°±ä½¿ç”¨è¿…é›·11ï¼Œæ–°ç‰ˆè¿…é›·é…åˆç½‘ç›˜ç®€ç›´ç¥ä¸€èˆ¬çš„ä½“éªŒã€‚</p>
<p><img src="/images/GraduationProject/uninstall.png" alt="GPUä¿¡æ¯"></p>
<p>å®‰è£…å®Œæˆåå¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œé¢ä½¿ç”¨<code>nvcc -V</code>çœ‹çœ‹ç»“æœã€‚</p>
<h2 id="cuDNNå®‰è£…"><a href="#cuDNNå®‰è£…" class="headerlink" title="cuDNNå®‰è£…"></a>cuDNNå®‰è£…</h2><p>cuDNNå®‰è£…æ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆè¿›å…¥<a href="https://developer.nvidia.com/rdp/cudnn-archive">å®˜ç½‘</a>ï¼Œé€‰æ‹©ä½ å®‰è£…çš„CUDAçš„å¯¹åº”ç‰ˆæœ¬å³å¯ã€‚ä¸‹è½½ä¹Ÿéœ€è¦è¿›è¡Œæ³¨å†Œï¼Œå¡«ä¸€ä¸ªè°ƒæŸ¥é—®å·ï¼Œä½†æ˜¯å› ä¸ºæˆ‘å®åœ¨è¿›ä¸å»ï¼Œå°±ä½¿ç”¨è¿…é›·æ¥ç®¡ä¸‹è½½é“¾æ¥ä¹‹é—´ä¸‹è½½ã€‚å°†è§£å‹åçš„<code>bin</code>ã€<code>include</code>ã€<code>lib</code>ä¸‰ä¸ªæ–‡ä»¶å¤åˆ¶è¿›å…¥<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.0</code>å³å¯ã€‚æˆ‘å®‰è£…çš„ç‰ˆæœ¬æ˜¯<code>8.0.4</code></p>
<h2 id="pytorchå®‰è£…"><a href="#pytorchå®‰è£…" class="headerlink" title="pytorchå®‰è£…"></a>pytorchå®‰è£…</h2><p>å¬é—»pytorchå®¹æ˜“è°ƒè¯•ï¼Œä¸”æ­å»ºç½‘ç»œæ¯”è¾ƒå¿«ï¼Œè€Œæˆ‘æ­¤å‰åªæ˜¯ç”¨è¿‡tensorflow2.0ä¸­çš„kerasè¿›è¡Œè¿‡æ­å»ºï¼Œå› æ­¤æœ¬æ¬¡æ¯•è®¾åˆæ­¥æ‰“ç®—ä½¿ç”¨pytorchä½œä¸ºå·¥å…·ï¼Œä¹Ÿå¯èƒ½ä¸ç”¨å‘¢(ï¿£yâ–½,ï¿£)â•­ ã€‚ä½¿ç”¨pytorchæ¨èçš„condaå®‰è£…æ–¹æ³•</p>
<p><code>conda install pytorch torchvision torchaudio cudatoolkit=11.0 -c pytorch</code></p>
<p>è¿™é‡Œæˆ‘æ˜¯ä½¿ç”¨æ¸…åé•œåƒæºçš„ï¼Œæ˜¯å¦è¦åŠ <code>-c pytorch</code>è¿˜æ˜¯çœ‹ä½ çš„<code>.condarc</code>æ€ä¹ˆå†™çš„ï¼Œå¦‚æœå†™äº†<code>custom_channels</code>ä¸”é‡Œé¢çš„<code>pytorch</code>ä¹Ÿæ˜¯ç”¨äº†æ¸…åæºçš„å¯ä»¥åŠ ï¼Œæ²¡æœ‰çš„è¯å°±å»æ‰<code>-c pytorch</code>ï¼Œç„¶è€Œæˆ‘é•œåƒæºä¹Ÿä¸‹ä¸äº†ï¼ˆåäº†ï¼‰ï¼Œå‘ç°æµè§ˆå™¨ä¹Ÿä¸‹ä¸äº†ï¼Œå°±åªèƒ½ç”¨è¿…é›·æ¥ç®¡ä¸‹è½½ï¼Œç„¶åæœ¬åœ°å®‰è£…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æœ¬åœ°å®‰è£…</span></span><br><span class="line">conda install --use-local cudatoolkit-11.0.221-h74a9793_0.conda</span><br><span class="line">conda install --use-local pytorch-1.7.1-py3.8_cuda110_cudnn8_0.tar.bz2</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿›è¡Œæµ‹è¯•<br><img src="/images/GraduationProject/verify.png" alt="verify"></p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ç¯å¢ƒçš„æ­å»ºå°±åˆ°æ­¤ä¸ºæ­¢ï¼Œå®‰è£…å¹¶ä¸éš¾ï¼Œåªæ˜¯æˆ‘æ²¡æƒ³åˆ°æˆ‘å°½ç„¶ä¼šè¿é•œåƒæºéƒ½ä¸‹ä¸åŠ¨ğŸ˜©ã€‚åç»­è§†æƒ…å†µå¯èƒ½ä¼šä½¿ç”¨GPUæœåŠ¡å™¨ï¼Œä½†æ˜¯ç°åœ¨å…ˆåœ¨æœ¬åœ°æ”¶é›†æ•°æ®é›†å’Œé¢„å…ˆå­¦ä¹ ã€‚</p>
]]></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ¯•ä¸šè®¾è®¡</tag>
        <tag>yolo</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯•ä¸šè®¾è®¡ï¼ˆäºŒï¼‰darknetç¼–è¯‘</title>
    <url>/2021/03/04/builddarknet/</url>
    <content><![CDATA[<blockquote>
<p>win10ç¼–è¯‘darknet</p>
</blockquote>
<span id="more"></span>

<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯’å‡è®­ç»ƒäº†4ä¸ªç‰ˆæœ¬çš„yoloï¼Œå…¶ä¸­yolov4å’Œyolov4-tinyæ˜¯åŸºäºdarknetçš„ã€‚ç”±äºéƒ½æ˜¯åœ¨<a href="https://colab.research.google.com/notebooks/welcome.ipynb">colab</a>ä¸Šè®­ç»ƒçš„ï¼Œä¸å¥½å±•ç¤ºï¼Œæ‰€ä»¥æ‰“ç®—åœ¨win10ä¸Šè·‘ä¸€ä¸‹ï¼Œå› æ­¤æœ¬æ–‡æ—¨åœ¨win10ç¼–è¯‘darknetçš„è¸©å‘è®°å½•ã€‚</p>
<h2 id="å®‰è£…Visual-Studio"><a href="#å®‰è£…Visual-Studio" class="headerlink" title="å®‰è£…Visual Studio"></a>å®‰è£…Visual Studio</h2><p>è¿™ä¸ªä¸ç”¨å¤šè¯´ï¼Œå®‰è£…2017æˆ–è€…2019ç‰ˆå°±è¡Œï¼Œéœ€è¦å¼€å¯è‹±è¯­è¯­è¨€</p>
<h2 id="å®‰è£…CUDA"><a href="#å®‰è£…CUDA" class="headerlink" title="å®‰è£…CUDA"></a>å®‰è£…CUDA</h2><p>å‚è€ƒä¸Šä¸€ç¯‡å®‰è£…CUDAå°±è¡Œï¼Œéœ€è¦CUDAv10.0ä»¥ä¸Šï¼Œå¹¶ä¸”å®‰è£…æ—¶è¦ç‚¹VSé›†æˆ</p>
<h2 id="vcpkgå®‰è£…"><a href="#vcpkgå®‰è£…" class="headerlink" title="vcpkgå®‰è£…"></a>vcpkgå®‰è£…</h2><p>å‚è€ƒvcpkgçš„å®˜æ–¹ä¸‹è½½æ–¹å¼ï¼Œ<code>powershell</code>ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/microsoft/vcpkg</span><br><span class="line"><span class="built_in">cd</span> vcpkg</span><br><span class="line">bootstrap<span class="literal">-vcpkg</span>.bat</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰§è¡Œ<code>bootstrap-vcpkg.bat</code>æ—¶ï¼Œä¸‹è½½<code>vcpkg.exe</code>é‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥ç›´æ¥å»<code>release</code>é‡Œé¢ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶</p>
<h2 id="vcpkgå®‰è£…ä¾èµ–"><a href="#vcpkgå®‰è£…ä¾èµ–" class="headerlink" title="vcpkgå®‰è£…ä¾èµ–"></a>vcpkgå®‰è£…ä¾èµ–</h2><p>æ ¹æ®AlexeyABçš„repoè¯´æ˜ï¼Œ<code>powershell</code>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vcpkg install darknet[<span class="type">full</span>]:x64<span class="literal">-windows</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p><strong>äº‹åå¾—çŸ¥ï¼Œæ­¤å¤„é‡åˆ°çš„ç½‘ç»œé—®é¢˜å¯ä»¥è¯•ä¸€è¯•æ ¡å›­ç½‘ï¼Œæ ¡å›­ç½‘ä¼¼ä¹å¯¹ä»å¤–ç½‘ä¸‹è½½æ–‡ä»¶æœ‰è¾ƒå¥½çš„æ•ˆæœ</strong></p>
<p>å®‰è£…opencvæ—¶ï¼Œéœ€è¦ä»<code>raw.githubusercontent.com</code>ä¸‹è½½ä¸œè¥¿ï¼Œç„¶è€Œé‡åˆ°äº†hosté—®é¢˜ã€‚é¦–å…ˆå°è¯•ä¿®æ”¹äº†hostï¼Œç»“æœé‡åˆ°äº†<code>SSL connect error</code>é—®é¢˜ï¼Œäºæ˜¯åœ¨åŠ äº†å‡ ä¸ªhostå‘ç°è¿˜æ˜¯å¤±è´¥äº†ã€‚é‚å°è¯•ä½¿ç”¨VPNä»£ç†ï¼ŒæŒ‰ç…§è¾“å‡ºå°†<code>HTTP_PROXY</code>å’Œ<code>HTTPS_PROXY</code>åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ï¼Œä¾ç„¶ä¸è¡Œã€‚å°è¯•ç›´æ¥åœ¨powershellä¸­ä½¿ç”¨å˜é‡ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$env:HTTPS_PROXY</span>=<span class="string">&quot;https://127.0.0.1:7890/&quot;</span></span><br><span class="line"><span class="variable">$env:HTTP_PROXY</span>=<span class="string">&quot;http://127.0.0.1:7890/&quot;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶çš„stausè¾“å‡ºä¸º</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Failed. Status: <span class="number">4</span>;<span class="string">&quot;A requested feature, protocol or option was not found built-in in this libcurl due to a build-time decision.&quot;</span></span><br><span class="line"></span><br><span class="line">Failed to download file.</span><br><span class="line"><span class="keyword">If</span> you use a proxy, please <span class="built_in">set</span> the HTTPS_PROXY and HTTP_PROXY environment variables to <span class="string">&quot;https://user:password@your-proxy-ip-address:port/&quot;</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> error with status <span class="number">4</span> (Issue <span class="comment">#15434),</span></span><br><span class="line"><span class="keyword">try</span> setting <span class="string">&quot;http://user:password@your-proxy-ip-address:port/&quot;</span>.</span><br><span class="line"></span><br><span class="line">Otherwise, please submit an issue at https://github.com/Microsoft/vcpkg/issues</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å› æ­¤æ ¹æ®è¦æ±‚æ‰§è¡Œä¸‹é¢ä»£ç </p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$env:HTTPS_PROXY</span>=<span class="string">&quot;http://127.0.0.1:7890/&quot;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶é‡æ–°æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå³å¯å®Œæˆä¸‹è½½ã€‚</p>
<p>å®‰è£…opencvæ—¶é‡åˆ°</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CMake Error at scripts&#x2F;cmake&#x2F;vcpkg_execute_build_process.cmake:144 (message):</span><br><span class="line">    Command failed: C:&#x2F;src&#x2F;vcpkg&#x2F;downloads&#x2F;tools&#x2F;cmake-3.19.2-windows&#x2F;cmake-3.19.2-win32-x86&#x2F;bin&#x2F;cmake.exe --build . --config Debug --target install -- -v -j9</span><br><span class="line">    Working Directory: C:&#x2F;src&#x2F;vcpkg&#x2F;buildtrees&#x2F;opencv4&#x2F;x64-windows-dbg</span><br><span class="line">    See logs for more information:</span><br><span class="line">      C:\src\vcpkg\buildtrees\opencv4\install-x64-windows-dbg-out.log</span><br><span class="line"></span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  scripts&#x2F;cmake&#x2F;vcpkg_build_cmake.cmake:96 (vcpkg_execute_build_process)</span><br><span class="line">  scripts&#x2F;cmake&#x2F;vcpkg_install_cmake.cmake:27 (vcpkg_build_cmake)</span><br><span class="line">  ports&#x2F;opencv4&#x2F;portfile.cmake:385 (vcpkg_install_cmake)</span><br><span class="line">  scripts&#x2F;ports.cmake:133 (include)</span><br></pre></td></tr></table></figure>
<p>å°è¯•å¦‚ä¸‹æŒ‡ä»¤</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">vcpkg install darknet[<span class="type">opencv</span>-<span class="type">base</span>,<span class="type">cuda</span>,<span class="type">cudnn</span>]:x64<span class="literal">-windows</span></span><br></pre></td></tr></table></figure>


<h2 id="ç¼–è¯‘darknet"><a href="#ç¼–è¯‘darknet" class="headerlink" title="ç¼–è¯‘darknet"></a>ç¼–è¯‘darknet</h2><p>æå‰å®‰è£…<a href="https://github.com/ninja-build/ninja">ninja</a>å¹¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡</p>
<p>ä¿®æ”¹<code>Makefile</code></p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">GPU=1</span><br><span class="line">CUDNN=1</span><br><span class="line">CUDNN_HALF=1</span><br><span class="line">OPENCV=1</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ‘æ˜¯gtx1050ï¼Œæ ¹æ®makefileé‡Œé¢çš„æ³¨é‡Šè‡ªå·±çš„ä¿®æ”¹</span></span><br><span class="line">ARCH= -gencode arch=compute_61,code=sm_61 -gencode arch=compute_61,code=compute_61 </span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§AlexeyABçš„repoï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼Œæ³¨æ„CMakeçš„ç‰ˆæœ¬ï¼Œè¿‡ä½å°†æ— æ³•ç¼–è¯‘ã€‚æ³¨æ„ä¸‹é¢çš„é¡ºåºï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦æ¸…ç†ä¸€ä¸‹ç¼“å­˜ï¼Œä¸ç„¶ä¼šä¸€ç›´ç¼–è¯‘å¤±è´¥</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$env:VCPKG_ROOT</span>=<span class="string">&quot;vcpkgçš„ä½ç½®&quot;</span></span><br><span class="line">git clone https://github.com/AlexeyAB/darknet</span><br><span class="line"><span class="built_in">cd</span> darknet</span><br><span class="line">powershell <span class="literal">-ExecutionPolicy</span> Bypass <span class="operator">-File</span> .\build.ps1</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ­£ç¡®æ‰§è¡Œä¸Šè¿°æ­¥éª¤çš„è¯ï¼Œç¼–è¯‘æ˜¯ä¸ä¼šå‡ºé”™çš„</p>
<h2 id="æµ‹è¯•darknet"><a href="#æµ‹è¯•darknet" class="headerlink" title="æµ‹è¯•darknet"></a>æµ‹è¯•darknet</h2><h3 id="åŸå›¾"><a href="#åŸå›¾" class="headerlink" title="åŸå›¾"></a>åŸå›¾</h3><p><img src="/images/GraduationProject/origin.jpg" alt="origin"></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">darknet.exe detector test cfg/coco.data cfg/yolov4.cfg yolov4.weights origin.jpg  <span class="literal">-thresh</span> <span class="number">0.25</span></span><br></pre></td></tr></table></figure>
<h3 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CUDA-version: 11000 (11000), cuDNN: 8.0.4, GPU count: 1  </span><br><span class="line"> OpenCV version: 4.5.1</span><br><span class="line"> 0 : compute_capability &#x3D; 610, cudnn_half &#x3D; 0, GPU: GeForce GTX 1050 </span><br><span class="line">net.optimized_memory &#x3D; 0 </span><br><span class="line">mini_batch &#x3D; 1, batch &#x3D; 8, time_steps &#x3D; 1, train &#x3D; 0</span><br><span class="line">   layer   filters  size&#x2F;strd(dil)      input                output</span><br><span class="line">   0 Create CUDA-stream - 0</span><br><span class="line"> Create cudnn-handle 0 </span><br><span class="line">conv     32       3 x 3&#x2F; 1    608 x 608 x   3 -&gt;  608 x 608 x  32 0.639 BF</span><br><span class="line">   1 conv     64       3 x 3&#x2F; 2    608 x 608 x  32 -&gt;  304 x 304 x  64 3.407 BF</span><br><span class="line">   2 conv     64       1 x 1&#x2F; 1    304 x 304 x  64 -&gt;  304 x 304 x  64 0.757 BF</span><br><span class="line">   3 route  1                                      -&gt;  304 x 304 x  64 </span><br><span class="line">   4 conv     64       1 x 1&#x2F; 1    304 x 304 x  64 -&gt;  304 x 304 x  64 0.757 BF</span><br><span class="line">   5 conv     32       1 x 1&#x2F; 1    304 x 304 x  64 -&gt;  304 x 304 x  32 0.379 BF</span><br><span class="line">   6 conv     64       3 x 3&#x2F; 1    304 x 304 x  32 -&gt;  304 x 304 x  64 3.407 BF</span><br><span class="line">   7 Shortcut Layer: 4,  wt &#x3D; 0, wn &#x3D; 0, outputs: 304 x 304 x  64 0.006 BF</span><br><span class="line">   8 conv     64       1 x 1&#x2F; 1    304 x 304 x  64 -&gt;  304 x 304 x  64 0.757 BF</span><br><span class="line">   9 route  8 2                                    -&gt;  304 x 304 x 128 </span><br><span class="line">  10 conv     64       1 x 1&#x2F; 1    304 x 304 x 128 -&gt;  304 x 304 x  64 1.514 BF</span><br><span class="line">  11 conv    128       3 x 3&#x2F; 2    304 x 304 x  64 -&gt;  152 x 152 x 128 3.407 BF</span><br><span class="line">  12 conv     64       1 x 1&#x2F; 1    152 x 152 x 128 -&gt;  152 x 152 x  64 0.379 BF</span><br><span class="line">  13 route  11                                     -&gt;  152 x 152 x 128</span><br><span class="line">  14 conv     64       1 x 1&#x2F; 1    152 x 152 x 128 -&gt;  152 x 152 x  64 0.379 BF</span><br><span class="line">  15 conv     64       1 x 1&#x2F; 1    152 x 152 x  64 -&gt;  152 x 152 x  64 0.189 BF</span><br><span class="line">  16 conv     64       3 x 3&#x2F; 1    152 x 152 x  64 -&gt;  152 x 152 x  64 1.703 BF</span><br><span class="line">  17 Shortcut Layer: 14,  wt &#x3D; 0, wn &#x3D; 0, outputs: 152 x 152 x  64 0.001 BF</span><br><span class="line">  18 conv     64       1 x 1&#x2F; 1    152 x 152 x  64 -&gt;  152 x 152 x  64 0.189 BF</span><br><span class="line">  19 conv     64       3 x 3&#x2F; 1    152 x 152 x  64 -&gt;  152 x 152 x  64 1.703 BF</span><br><span class="line">  20 Shortcut Layer: 17,  wt &#x3D; 0, wn &#x3D; 0, outputs: 152 x 152 x  64 0.001 BF</span><br><span class="line">  21 conv     64       1 x 1&#x2F; 1    152 x 152 x  64 -&gt;  152 x 152 x  64 0.189 BF</span><br><span class="line">  22 route  21 12                                  -&gt;  152 x 152 x 128 </span><br><span class="line">  23 conv    128       1 x 1&#x2F; 1    152 x 152 x 128 -&gt;  152 x 152 x 128 0.757 BF</span><br><span class="line">  24 conv    256       3 x 3&#x2F; 2    152 x 152 x 128 -&gt;   76 x  76 x 256 3.407 BF</span><br><span class="line">  25 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line">  26 route  24                                     -&gt;   76 x  76 x 256</span><br><span class="line">  27 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line">  28 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  29 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  30 Shortcut Layer: 27,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  31 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  32 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  33 Shortcut Layer: 30,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  34 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  35 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  36 Shortcut Layer: 33,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  37 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  38 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  39 Shortcut Layer: 36,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  40 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  41 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  42 Shortcut Layer: 39,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  43 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  44 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  45 Shortcut Layer: 42,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  46 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  47 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  48 Shortcut Layer: 45,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  49 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  50 conv    128       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 1.703 BF</span><br><span class="line">  51 Shortcut Layer: 48,  wt &#x3D; 0, wn &#x3D; 0, outputs:  76 x  76 x 128 0.001 BF</span><br><span class="line">  52 conv    128       1 x 1&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 128 0.189 BF</span><br><span class="line">  53 route  52 25                                  -&gt;   76 x  76 x 256 </span><br><span class="line">  54 conv    256       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 256 0.757 BF</span><br><span class="line">  55 conv    512       3 x 3&#x2F; 2     76 x  76 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line">  56 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line">  57 route  55                                     -&gt;   38 x  38 x 512</span><br><span class="line">  58 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line">  59 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  60 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  61 Shortcut Layer: 58,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  62 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  63 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  64 Shortcut Layer: 61,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  65 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  66 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  67 Shortcut Layer: 64,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  68 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  69 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  70 Shortcut Layer: 67,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  71 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  72 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  73 Shortcut Layer: 70,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  74 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  75 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  76 Shortcut Layer: 73,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  77 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  78 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  79 Shortcut Layer: 76,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  80 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  81 conv    256       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 1.703 BF</span><br><span class="line">  82 Shortcut Layer: 79,  wt &#x3D; 0, wn &#x3D; 0, outputs:  38 x  38 x 256 0.000 BF</span><br><span class="line">  83 conv    256       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 256 0.189 BF</span><br><span class="line">  84 route  83 56                                  -&gt;   38 x  38 x 512 </span><br><span class="line">  85 conv    512       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 512 0.757 BF</span><br><span class="line">  86 conv   1024       3 x 3&#x2F; 2     38 x  38 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line">  87 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line">  88 route  86                                     -&gt;   19 x  19 x1024</span><br><span class="line">  89 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line">  90 conv    512       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.189 BF</span><br><span class="line">  91 conv    512       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 1.703 BF</span><br><span class="line">  92 Shortcut Layer: 89,  wt &#x3D; 0, wn &#x3D; 0, outputs:  19 x  19 x 512 0.000 BF</span><br><span class="line">  93 conv    512       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.189 BF</span><br><span class="line">  94 conv    512       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 1.703 BF</span><br><span class="line">  95 Shortcut Layer: 92,  wt &#x3D; 0, wn &#x3D; 0, outputs:  19 x  19 x 512 0.000 BF</span><br><span class="line">  96 conv    512       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.189 BF</span><br><span class="line">  97 conv    512       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 1.703 BF</span><br><span class="line">  98 Shortcut Layer: 95,  wt &#x3D; 0, wn &#x3D; 0, outputs:  19 x  19 x 512 0.000 BF</span><br><span class="line">  99 conv    512       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.189 BF</span><br><span class="line"> 100 conv    512       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 1.703 BF</span><br><span class="line"> 101 Shortcut Layer: 98,  wt &#x3D; 0, wn &#x3D; 0, outputs:  19 x  19 x 512 0.000 BF</span><br><span class="line"> 102 conv    512       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.189 BF</span><br><span class="line"> 103 route  102 87                                 -&gt;   19 x  19 x1024</span><br><span class="line"> 104 conv   1024       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x1024 0.757 BF</span><br><span class="line"> 105 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 106 conv   1024       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line"> 107 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 108 max                5x 5&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.005 BF</span><br><span class="line"> 109 route  107                                            -&gt;   19 x  19 x 512</span><br><span class="line"> 110 max                9x 9&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.015 BF</span><br><span class="line"> 111 route  107                                            -&gt;   19 x  19 x 512</span><br><span class="line"> 112 max               13x13&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 512 0.031 BF</span><br><span class="line"> 113 route  112 110 108 107                        -&gt;   19 x  19 x2048</span><br><span class="line"> 114 conv    512       1 x 1&#x2F; 1     19 x  19 x2048 -&gt;   19 x  19 x 512 0.757 BF</span><br><span class="line"> 115 conv   1024       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line"> 116 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 117 conv    256       1 x 1&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x 256 0.095 BF</span><br><span class="line"> 118 upsample                 2x    19 x  19 x 256 -&gt;   38 x  38 x 256</span><br><span class="line"> 119 route  85                                     -&gt;   38 x  38 x 512</span><br><span class="line"> 120 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 121 route  120 118                                -&gt;   38 x  38 x 512 </span><br><span class="line"> 122 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 123 conv    512       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line"> 124 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 125 conv    512       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line"> 126 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 127 conv    128       1 x 1&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 128 0.095 BF</span><br><span class="line"> 128 upsample                 2x    38 x  38 x 128 -&gt;   76 x  76 x 128</span><br><span class="line"> 129 route  54                                     -&gt;   76 x  76 x 256</span><br><span class="line"> 130 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line"> 131 route  130 128                                -&gt;   76 x  76 x 256</span><br><span class="line"> 132 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line"> 133 conv    256       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 256 3.407 BF</span><br><span class="line"> 134 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line"> 135 conv    256       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 256 3.407 BF</span><br><span class="line"> 136 conv    128       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 128 0.379 BF</span><br><span class="line"> 137 conv    256       3 x 3&#x2F; 1     76 x  76 x 128 -&gt;   76 x  76 x 256 3.407 BF</span><br><span class="line"> 138 conv    255       1 x 1&#x2F; 1     76 x  76 x 256 -&gt;   76 x  76 x 255 0.754 BF</span><br><span class="line"> 139 yolo</span><br><span class="line">[yolo] params: iou loss: ciou (4), iou_norm: 0.07, obj_norm: 1.00, cls_norm: 1.00, delta_norm: 1.00, scale_x_y: 1.20</span><br><span class="line">nms_kind: greedynms (1), beta &#x3D; 0.600000</span><br><span class="line"> 140 route  136                                            -&gt;   76 x  76 x 128</span><br><span class="line"> 141 conv    256       3 x 3&#x2F; 2     76 x  76 x 128 -&gt;   38 x  38 x 256 0.852 BF</span><br><span class="line"> 142 route  141 126                                -&gt;   38 x  38 x 512 </span><br><span class="line"> 143 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 144 conv    512       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line"> 145 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 146 conv    512       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line"> 147 conv    256       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 256 0.379 BF</span><br><span class="line"> 148 conv    512       3 x 3&#x2F; 1     38 x  38 x 256 -&gt;   38 x  38 x 512 3.407 BF</span><br><span class="line"> 149 conv    255       1 x 1&#x2F; 1     38 x  38 x 512 -&gt;   38 x  38 x 255 0.377 BF</span><br><span class="line"> 150 yolo</span><br><span class="line">[yolo] params: iou loss: ciou (4), iou_norm: 0.07, obj_norm: 1.00, cls_norm: 1.00, delta_norm: 1.00, scale_x_y: 1.10</span><br><span class="line">nms_kind: greedynms (1), beta &#x3D; 0.600000</span><br><span class="line"> 151 route  147                                            -&gt;   38 x  38 x 256</span><br><span class="line"> 152 conv    512       3 x 3&#x2F; 2     38 x  38 x 256 -&gt;   19 x  19 x 512 0.852 BF</span><br><span class="line"> 153 route  152 116                                -&gt;   19 x  19 x1024</span><br><span class="line"> 154 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 155 conv   1024       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line"> 156 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 157 conv   1024       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line"> 158 conv    512       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 512 0.379 BF</span><br><span class="line"> 159 conv   1024       3 x 3&#x2F; 1     19 x  19 x 512 -&gt;   19 x  19 x1024 3.407 BF</span><br><span class="line"> 160 conv    255       1 x 1&#x2F; 1     19 x  19 x1024 -&gt;   19 x  19 x 255 0.189 BF</span><br><span class="line"> 161 yolo</span><br><span class="line">[yolo] params: iou loss: ciou (4), iou_norm: 0.07, obj_norm: 1.00, cls_norm: 1.00, delta_norm: 1.00, scale_x_y: 1.05</span><br><span class="line">nms_kind: greedynms (1), beta &#x3D; 0.600000</span><br><span class="line">Total BFLOPS 128.459</span><br><span class="line">avg_outputs &#x3D; 1068395</span><br><span class="line"> Allocate additional workspace_size &#x3D; 52.43 MB</span><br><span class="line">Loading weights from yolov4.weights...</span><br><span class="line"> seen 64, trained: 32032 K-images (500 Kilo-batches_64)</span><br><span class="line">Done! Loaded 162 layers from weights-file </span><br><span class="line"> Detection layer: 139 - type &#x3D; 28 </span><br><span class="line"> Detection layer: 150 - type &#x3D; 28 </span><br><span class="line"> Detection layer: 161 - type &#x3D; 28</span><br><span class="line">origin.jpg: Predicted in 184.923000 milli-seconds.</span><br><span class="line">person: 98%</span><br><span class="line">car: 94%</span><br><span class="line">truck: 31%</span><br><span class="line">car: 88%</span><br><span class="line">car: 99%</span><br><span class="line">person: 99%</span><br><span class="line">person: 37%</span><br><span class="line">car: 99%</span><br><span class="line">bus: 57%</span><br><span class="line">truck: 60%</span><br><span class="line">car: 99%</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p>å¯ä»¥çœ‹åˆ°é¢„æµ‹ç»“æœï¼ŒåŒæ—¶darkneté‡Œé¢ä¹Ÿè¾“å‡ºäº†GPUçš„ä¿¡æ¯<br><img src="/images/GraduationProject/predictions.jpg" alt="predictions"></p>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>win10ç‰ˆæœ¬çš„darknet gpuç‰ˆæœ¬å®‰è£…å®Œæˆã€‚é“è·¯åå·ï¼Œè®°å½•ä¸‹è¸©è¿‡çš„å‘</p>
]]></content>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ¯•ä¸šè®¾è®¡</tag>
        <tag>yolo</tag>
        <tag>darknet</tag>
      </tags>
  </entry>
</search>
